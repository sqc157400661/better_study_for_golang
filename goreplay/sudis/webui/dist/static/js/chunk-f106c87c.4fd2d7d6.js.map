{"version":3,"sources":["webpack:///./src/views/program/ProgramLogger.vue?1b99","webpack:///src/views/program/ProgramLogger.vue","webpack:///./src/views/program/ProgramLogger.vue?73eb","webpack:///./src/views/program/ProgramLogger.vue","webpack:///./src/plugins/vTitle.vue?9467","webpack:///src/plugins/vTitle.vue","webpack:///./src/plugins/vTitle.vue?a779","webpack:///./src/plugins/vTitle.vue","webpack:///./node_modules/_core-js@2.6.11@core-js/modules/es6.function.name.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","name","_l","line","_v","_s","staticRenderFns","component","class","titleClass","title","_t","dP","f","FProto","Function","prototype","nameRE","NAME","configurable","get","match","e"],"mappings":"yHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,SAAS,CAACF,EAAG,SAAS,CAACG,MAAM,CAAC,cAAc,eAAe,MAAQ,QAAUP,EAAIQ,KAAO,OAAOJ,EAAG,MAAM,CAACE,YAAY,cAAcN,EAAIS,GAAIT,EAAS,OAAE,SAASU,GAAM,OAAON,EAAG,MAAM,CAACJ,EAAIW,GAAGX,EAAIY,GAAGF,SAAW,IAAI,IACrUG,EAAkB,G,kCCUtB,GACE,KAAF,gBACE,WAAF,CAAI,OAAJ,QACE,KAAF,WAAI,MAAJ,CACM,KAAN,GACM,KAAN,GACM,MAAN,KAEE,QARF,WASI,KAAJ,4BACI,KAAJ,4BACI,KAAJ,QAEE,UAbF,WAcI,KAAJ,gBAEE,QAAF,CACI,UADJ,WAGM,IAAN,KACM,QAAN,cACQ,OAAR,EAMQ,IAAR,qEAGQ,OAFA,EAAR,+BACQ,EAAR,6BACA,GAII,KAlBJ,WAkBM,IAAN,OACM,GAAN,+BACQ,MAAR,sBACA,CACQ,IAAR,OACQ,KAAR,0DACQ,KAAR,yBACU,EAAV,4BACY,KAAZ,OACY,KAAZ,OACY,KAAZ,+BACY,OAAZ,qCAIQ,KAAR,mCAGI,WApCJ,SAoCA,GACM,KAAN,sBChE0c,I,YCOtcC,EAAY,eACd,EACAf,EACAc,GACA,EACA,KACA,KACA,MAIa,aAAAC,E,2CClBf,IAAIf,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,KAAK,CAACE,YAAY,+BAA+B,CAACF,EAAG,KAAK,CAACE,YAAY,mBAAmB,CAACF,EAAG,IAAI,CAACE,YAAY,KAAKS,MAAMf,EAAIgB,aAAahB,EAAIW,GAAG,IAAIX,EAAIY,GAAGZ,EAAIiB,OAAO,YAAYb,EAAG,KAAK,CAACE,YAAY,WAAW,CAACN,EAAIkB,GAAG,YAAY,MACvUL,EAAkB,GCWtB,GACE,KAAF,SACE,MAAF,CACI,MAAJ,OACI,WAAJ,CACM,KAAN,OACM,QAAN,MClBob,I,YCOhbC,EAAY,eACd,EACAf,EACAc,GACA,EACA,KACA,KACA,MAIa,OAAAC,E,8BClBf,IAAIK,EAAK,EAAQ,QAAgBC,EAC7BC,EAASC,SAASC,UAClBC,EAAS,wBACTC,EAAO,OAGXA,KAAQJ,GAAU,EAAQ,SAAqBF,EAAGE,EAAQI,EAAM,CAC9DC,cAAc,EACdC,IAAK,WACH,IACE,OAAQ,GAAK1B,MAAM2B,MAAMJ,GAAQ,GACjC,MAAOK,GACP,MAAO","file":"static/js/chunk-f106c87c.4fd2d7d6.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"h-100\"},[_c('VTitle',{attrs:{\"title-class\":\"fa-file-text\",\"title\":'日志查看【' + _vm.name + '】'}}),_c('div',{staticClass:\"logger p-3\"},_vm._l((_vm.lines),function(line){return _c('div',[_vm._v(_vm._s(line))])}),0)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"h-100\">\n        <VTitle title-class=\"fa-file-text\" :title=\"'日志查看【' + name + '】'\"/>\n        <div class=\"logger p-3\">\n            <div v-for=\"(line) in lines\">{{line}}</div>\n        </div>\n    </div>\n</template>\n<script>\n    import VTitle from \"../../plugins/vTitle\";\n\n    export default {\n        name: \"ProgramLogger\",\n        components: {VTitle},\n        data: () => ({\n            node: \"\",\n            name: \"\",\n            lines: [],\n        }),\n        mounted() {\n            this.node = this.$route.query.node;\n            this.name = this.$route.query.name;\n            this.init();\n        },\n        destroyed() {\n            this.socket.close();\n        },\n        methods: {\n            getDomain() {\n                //如果配置里，就是用配置地址\n                let configDomain = process.env.VUE_APP_WS;\n                if (configDomain !== undefined && configDomain !== '') {\n                    return configDomain;\n                }\n                //如果未配置，测试网使用默认本机地址，其他根据域名解析出ws地址\n                if (process.env.NODE_ENV === \"development\") {\n                    return \"ws://127.0.0.1:5984\"\n                } else {\n                    let domain = window.location.href.substr(0, window.location.href.indexOf(\"/\", 8));\n                    domain = domain.replace(\"https://\", \"wss://\");\n                    domain = domain.replace(\"http://\", \"ws://\");\n                    return domain;\n                }\n            },\n\n            init() {\n                if (typeof (WebSocket) === \"undefined\") {\n                    alert(\"您的浏览器不支持socket\")\n                } else {\n                    let self = this;\n                    this.socket = new WebSocket(self.getDomain() + \"/admin/program/logs\");\n                    this.socket.onopen = () => {\n                        self.socket.send(JSON.stringify({\n                            name: this.name,\n                            node: this.node,\n                            user: localStorage.getItem(\"x-user\"),\n                            ticket: localStorage.getItem(\"x-ticket\")\n                        }));\n                    };\n                    // 监听socket消息\n                    this.socket.onmessage = this.getMessage;\n                }\n            },\n            getMessage(msg) {\n                this.lines.push(msg.data);\n            }\n        }\n    }\n</script>\n","import mod from \"-!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./ProgramLogger.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./ProgramLogger.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ProgramLogger.vue?vue&type=template&id=3acdd6f0&\"\nimport script from \"./ProgramLogger.vue?vue&type=script&lang=js&\"\nexport * from \"./ProgramLogger.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ol',{staticClass:\"breadcrumb breadcrumb-fixed\"},[_c('li',{staticClass:\"breadcrumb-item\"},[_c('i',{staticClass:\"fa\",class:_vm.titleClass}),_vm._v(\" \"+_vm._s(_vm.title)+\"\\n    \")]),_c('li',{staticClass:\"ml-auto\"},[_vm._t(\"default\")],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <ol class=\"breadcrumb breadcrumb-fixed\">\n        <li class=\"breadcrumb-item\">\n            <i class=\"fa\" :class=\"titleClass\"/>&nbsp;{{title}}\n        </li>\n        <li class=\"ml-auto\">\n            <slot/>\n        </li>\n    </ol>\n</template>\n\n<script>\n    export default {\n        name: \"vTitle\",\n        props: {\n            title: String,\n            titleClass: {\n                type: String,\n                default: \"\"\n            },\n        }\n    }\n</script>\n","import mod from \"-!../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js!../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./vTitle.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js!../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./vTitle.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./vTitle.vue?vue&type=template&id=02a1053a&\"\nimport script from \"./vTitle.vue?vue&type=script&lang=js&\"\nexport * from \"./vTitle.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/_vue-loader@15.9.3@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var dP = require('./_object-dp').f;\nvar FProto = Function.prototype;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// 19.2.4.2 name\nNAME in FProto || require('./_descriptors') && dP(FProto, NAME, {\n  configurable: true,\n  get: function () {\n    try {\n      return ('' + this).match(nameRE)[1];\n    } catch (e) {\n      return '';\n    }\n  }\n});\n"],"sourceRoot":""}