(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-00e70d2c"],{c0cf:function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ol",{staticClass:"breadcrumb breadcrumb-fixed"},[s("li",{staticClass:"breadcrumb-item"},[s("i",{staticClass:"fa",class:t.titleClass}),t._v(" "+t._s(t.title)+"\n    ")]),s("li",{staticClass:"ml-auto"},[t._t("default")],2)])},a=[],i={name:"vTitle",props:{title:String,titleClass:{type:String,default:""}}},o=i,r=s("9ca4"),c=Object(r["a"])(o,n,a,!1,null,null,null);e["a"]=c.exports},c79c:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"h-100"},[s("v-title",{attrs:{title:"系统管理","title-class":"icon-settings"}}),s("div",{staticClass:"animated fadeIn"},[s("b-tabs",{staticClass:"h-100",attrs:{"content-class":"h-100"}},[s("b-tab",{attrs:{active:""}},[s("template",{slot:"title"},[s("i",{staticClass:"icons cui-envelope-closed"}),t._v(" 邮箱配置\n                ")]),s("email")],2),s("b-tab",[s("template",{slot:"title"},[s("i",{staticClass:"icon-bell"}),t._v(" WebHook")]),s("webhook")],2),s("b-tab",[s("template",{slot:"title"},[s("i",{staticClass:"icons cui-comment-square"}),t._v(" gNotify（开发中）\n                ")]),s("h4",[t._v("\n                    正在开发中，敬请期待......\n                ")])],2),s("b-tab",[s("template",{slot:"title"},[s("i",{staticClass:"icons cui-comment-square"}),t._v(" 推送配置说明\n                ")]),s("h4",{staticClass:"p-5"},[s("a",{attrs:{href:"https://gitee.com/ihaiker/sudis/blob/master/docs/NOTIFY.md",target:"_blank"}},[t._v("点击查看详细配置说明")])])],2)],1)],1)],1)},a=[],i=s("c0cf"),o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"alert alert-info"},[t._v("邮件服务器配置")]),s("div",{staticClass:"input-group"},[t._m(0),s("input",{directives:[{name:"model",rawName:"v-model",value:t.address,expression:"address"}],staticClass:"form-control",attrs:{type:"text",placeholder:"SMTP地址"},domProps:{value:t.address},on:{input:function(e){e.target.composing||(t.address=e.target.value)}}}),t._m(1),s("input",{directives:[{name:"model",rawName:"v-model",value:t.port,expression:"port"}],staticClass:"form-control",attrs:{type:"number",placeholder:"SMTP端口号"},domProps:{value:t.port},on:{input:function(e){e.target.composing||(t.port=e.target.value)}}}),s("div",{staticClass:"input-group-append"},[s("button",{staticClass:"btn btn-primary",on:{click:t.setConfig}},[t._v(" 设 置")])]),s("div",{staticClass:"input-group-append"},[s("button",{staticClass:"btn btn-dark",on:{click:t.clearConfig}},[t._v("清除设置")])])]),s("div",{staticClass:"input-group mt-2"},[t._m(2),s("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Username"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}}),t._m(3),s("input",{directives:[{name:"model",rawName:"v-model",value:t.passwd,expression:"passwd"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Password"},domProps:{value:t.passwd},on:{input:function(e){e.target.composing||(t.passwd=e.target.value)}}}),t._m(4),s("input",{directives:[{name:"model",rawName:"v-model",value:t.to,expression:"to"}],staticClass:"form-control",attrs:{type:"text",placeholder:"接收用户"},domProps:{value:t.to},on:{input:function(e){e.target.composing||(t.to=e.target.value)}}}),s("div",{staticClass:"input-group-append"},[s("button",{staticClass:"btn btn-tumblr w-100",on:{click:t.testConfig}},[t._v("测试")])])]),s("div",{staticClass:"alert alert-info mt-2"},[t._v("通知模板")]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],staticClass:"form-control mt-3",staticStyle:{"min-height":"300px"},domProps:{value:t.content},on:{input:function(e){e.target.composing||(t.content=e.target.value)}}})])},r=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"input-group-prepend"},[s("span",{staticClass:"input-group-text"},[s("i",{staticClass:"fa fa-user"}),t._v(" SMTP服务地址：\n            ")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"input-group-prepend"},[s("span",{staticClass:"input-group-text"},[s("i",{staticClass:"fa fa-envelope"})])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"input-group-prepend"},[s("span",{staticClass:"input-group-text"},[s("i",{staticClass:"fa fa-user"}),t._v(" 用户名\n            ")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"input-group-prepend"},[s("span",{staticClass:"input-group-text"},[s("i",{staticClass:"fa fa-asterisk"}),t._v(" 密码\n            ")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"input-group-prepend"},[s("span",{staticClass:"input-group-text"},[s("i",{staticClass:"fa fa-user"}),t._v(" 接收用户\n            ")])])}],c=(s("cc57"),{name:"email",data:function(){return{address:"",port:465,name:"",passwd:"",to:"",content:'\n{{ if eq .Type "process" }}\n    <h1>程序通知：</h1>\n    <table>\n        <tr>\n            <th>程序节点</th><td>{{.Process.Node}}</td>\n            <th>名称</th><td>{{.Process.Name}}</td>\n        </tr>\n        <tr>\n            <th>From:</th><td>{{.FromStatus}}</td>\n            <th>To:</th><td>{{.ToStatus}}</td>\n        </tr>\n    </table>\n{{else}}\n    <h1>节点通知：</h1>\n    {{.Node}} 状态变更为：{{.Status}}\n{{end}}\n'}},mounted:function(){this.getConfig()},methods:{getConfig:function(){var t=this;t.$axios.get("/admin/notify/email").then((function(e){var s=JSON.parse(e.config);t.address=s.address,t.port=s.port,t.name=s.name,t.passwd=s.passwd,t.content=s.content,t.to=s.to})).catch((function(e){t.$toast.error("email"+e.message)}))},testConfig:function(){this.execConfig("/admin/notify/test")},setConfig:function(){this.execConfig("/admin/notify")},clearConfig:function(){var t=this;t.$axios.delete("/admin/notify/email").then((function(e){t.$toast.success("清除成功！"),t.address="",t.name="",t.passwd="",t.content="",t.to=""})).catch((function(e){t.$toast.error("email"+e.message)}))},execConfig:function(t){var e=this,s={address:e.address,port:parseInt(e.port),name:e.name,passwd:e.passwd,content:e.content,to:e.to};e.$axios.post(t,{name:"email",config:JSON.stringify(s)}).then((function(t){e.$toast.success("成功！")})).catch((function(t){e.$toast.error("email"+t.message)}))}}}),l=c,u=s("9ca4"),p=Object(u["a"])(l,o,r,!1,null,null,null),d=p.exports,m=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t._m(0),s("div",{staticClass:"input-group"},[t._m(1),s("input",{directives:[{name:"model",rawName:"v-model",value:t.address,expression:"address"}],staticClass:"form-control",attrs:{type:"text",placeholder:"WebHook地址"},domProps:{value:t.address},on:{input:function(e){e.target.composing||(t.address=e.target.value)}}}),s("div",{staticClass:"input-group-append"},[s("button",{staticClass:"btn btn-block btn-primary",staticStyle:{width:"120px"},on:{click:t.setConfig}},[t._v("设置")])])]),s("div",{staticClass:"input-group mt-2"},[t._m(2),s("input",{directives:[{name:"model",rawName:"v-model",value:t.token,expression:"token"}],staticClass:"form-control",attrs:{type:"text",placeholder:"SecurityToken"},domProps:{value:t.token},on:{input:function(e){e.target.composing||(t.token=e.target.value)}}}),s("div",{staticClass:"input-group-append"},[s("button",{staticClass:"btn btn-block btn-vine",staticStyle:{width:"120px"},on:{click:t.testConfig}},[t._v("测试")])]),s("div",{staticClass:"input-group-append"},[s("button",{staticClass:"btn btn-outline-danger",staticStyle:{width:"120px"},on:{click:t.clearConfig}},[t._v("清除")])])]),s("div",{staticClass:"alert alert-info mt-2"},[t._v("\n        通知模板："),t.address?s("span",[t._v(t._s(t.address)+"?access_token="+t._s(t.token))]):t._e()]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],staticClass:"form-control mt-3",staticStyle:{"min-height":"350px"},attrs:{placeholder:"使用程序默认JSON推送"},domProps:{value:t.content},on:{input:function(e){e.target.composing||(t.content=e.target.value)}}})])},f=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"alert alert-info"},[s("i",{staticClass:"icon-settings"}),t._v(" 地址设置：WebHook通知。Webhook将以POST形式推送模板JSON内容")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"input-group-prepend"},[s("span",{staticClass:"input-group-text"},[s("i",{staticClass:"fa fa-user"}),t._v(" WebHook地址：\n            ")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"input-group-prepend"},[s("span",{staticClass:"input-group-text"},[s("i",{staticClass:"fa fa-asterisk"}),t._v(" Access Token：\n            ")])])}],v={name:"webhook",data:function(){return{address:"",token:"",content:""}},mounted:function(){this.getConfig()},methods:{testConfig:function(){this.execConfig("/admin/notify/test")},setConfig:function(){this.execConfig("/admin/notify")},getConfig:function(){var t=this;t.$axios.get("/admin/notify/webhook").then((function(e){var s=JSON.parse(e.config);t.address=s.address,t.token=s.token,t.content=s.content})).catch((function(e){t.$toast.error("WebHock"+e.message)}))},clearConfig:function(){var t=this;t.$axios.delete("/admin/notify/webhook").then((function(e){t.$toast.success("清除成功！"),t.address="",t.token="",t.content=""})).catch((function(e){t.$toast.error("email"+e.message)}))},execConfig:function(t){var e=this,s={address:e.address,token:e.token,content:e.content};e.$axios.post(t,{name:"webhook",config:JSON.stringify(s)}).then((function(t){e.$toast.success("成功！")})).catch((function(t){e.$toast.error("WebHock"+t.message)}))}}},g=v,C=Object(u["a"])(g,m,f,!1,null,null,null),h=C.exports,b={name:"Tags",components:{Webhook:h,Email:d,vTitle:i["a"]}},_=b,x=Object(u["a"])(_,n,a,!1,null,null,null);e["default"]=x.exports},cc57:function(t,e,s){var n=s("064e").f,a=Function.prototype,i=/^\s*function ([^ (]*)/,o="name";o in a||s("149f")&&n(a,o,{configurable:!0,get:function(){try{return(""+this).match(i)[1]}catch(t){return""}}})}}]);
//# sourceMappingURL=chunk-00e70d2c.4c927a97.js.map